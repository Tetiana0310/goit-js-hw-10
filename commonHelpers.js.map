{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["// Описаний в документації\nimport flatpickr from \"flatpickr\";\n// Додатковий імпорт стилів\nimport \"flatpickr/dist/flatpickr.min.css\";\n\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nconst refs = {\n  input: document.querySelector('input#datetime-picker'),\n  btnStart: document.querySelector('[data-start]'),\n  days: document.querySelector('[data-days]'),\n  hours: document.querySelector('[data-hours]'),\n  mins: document.querySelector('[data-minutes]'),\n  secs: document.querySelector('[data-seconds]'),\n};\n\nlet userSelectedDate = null;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    userSelectedDate = selectedDates[0];\n    if (checkRightDate(userSelectedDate.getTime())) {\n      refs.btnStart.disabled = false;\n    } else {\n      iziToast.error({\n        title: 'Error',\n        message: 'Please choose a date in the future',\n      });\n      refs.btnStart.disabled = true;\n    }\n  },\n};\n\nrefs.btnStart.disabled = true;\n\nrefs.btnStart.addEventListener('click', onCountTimer);\n\nflatpickr(refs.input, options);\n\nfunction onCountTimer(evt) {\n  evt.preventDefault();\n  \n  if (!userSelectedDate) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please select a date first',\n    });\n    return;\n    }\n    \n    refs.btnStart.disabled = true;\n  refs.input.disabled = true;\n\n  const countdownId = setInterval(() => {\n    const countdownTime = checkRightDate(userSelectedDate.getTime());\n    \n    if (countdownTime !== null) {\n      displayCountdown(countdownTime);\n    } else {\n      clearInterval(countdownId)\n        refs.input.disabled = false;\n      };\n    } , 1000);\n}\n\nfunction displayCountdown(time) {\n  const { days, hours, minutes, seconds } = convertMs(time);\n  refs.days.textContent = addLeadingZero(days);\n  refs.hours.textContent = addLeadingZero(hours);\n  refs.mins.textContent = addLeadingZero(minutes);\n  refs.secs.textContent = addLeadingZero(seconds);\n}\n\nfunction checkRightDate(date) {\n  const currentDate = Date.now();\n  const distance = date - currentDate;\n\n  return date > currentDate ? distance : null;\n}\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0');\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nconsole.log(convertMs(2000)); // {days: 0, hours: 0, minutes: 0, seconds: 2}\nconsole.log(convertMs(140000)); // {days: 0, hours: 0, minutes: 2, seconds: 20}\nconsole.log(convertMs(24140000)); // {days: 0, hours: 6 minutes: 42, seconds: 20}"],"names":["refs","userSelectedDate","options","selectedDates","checkRightDate","iziToast","onCountTimer","flatpickr","evt","countdownId","countdownTime","displayCountdown","time","days","hours","minutes","seconds","convertMs","addLeadingZero","date","currentDate","distance","value","ms"],"mappings":"2GAWA,MAAMA,EAAO,CACX,MAAO,SAAS,cAAc,uBAAuB,EACrD,SAAU,SAAS,cAAc,cAAc,EAC/C,KAAM,SAAS,cAAc,aAAa,EAC1C,MAAO,SAAS,cAAc,cAAc,EAC5C,KAAM,SAAS,cAAc,gBAAgB,EAC7C,KAAM,SAAS,cAAc,gBAAgB,CAC/C,EAEA,IAAIC,EAAmB,KAEvB,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBF,EAAmBE,EAAc,CAAC,EAC9BC,EAAeH,EAAiB,QAAO,CAAE,EAC3CD,EAAK,SAAS,SAAW,IAEzBK,EAAS,MAAM,CACb,MAAO,QACP,QAAS,oCACjB,CAAO,EACDL,EAAK,SAAS,SAAW,GAE5B,CACH,EAEAA,EAAK,SAAS,SAAW,GAEzBA,EAAK,SAAS,iBAAiB,QAASM,CAAY,EAEpDC,EAAUP,EAAK,MAAOE,CAAO,EAE7B,SAASI,EAAaE,EAAK,CAGzB,GAFAA,EAAI,eAAc,EAEd,CAACP,EAAkB,CACrBI,EAAS,MAAM,CACb,MAAO,QACP,QAAS,4BACf,CAAK,EACD,MACC,CAEDL,EAAK,SAAS,SAAW,GAC3BA,EAAK,MAAM,SAAW,GAEtB,MAAMS,EAAc,YAAY,IAAM,CACpC,MAAMC,EAAgBN,EAAeH,EAAiB,QAAS,CAAA,EAE3DS,IAAkB,KACpBC,EAAiBD,CAAa,GAE9B,cAAcD,CAAW,EACvBT,EAAK,MAAM,SAAW,GAEzB,EAAG,GAAI,CACZ,CAEA,SAASW,EAAiBC,EAAM,CAC9B,KAAM,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYC,EAAUL,CAAI,EACxDZ,EAAK,KAAK,YAAckB,EAAeL,CAAI,EAC3Cb,EAAK,MAAM,YAAckB,EAAeJ,CAAK,EAC7Cd,EAAK,KAAK,YAAckB,EAAeH,CAAO,EAC9Cf,EAAK,KAAK,YAAckB,EAAeF,CAAO,CAChD,CAEA,SAASZ,EAAee,EAAM,CAC5B,MAAMC,EAAc,KAAK,MACnBC,EAAWF,EAAOC,EAExB,OAAOD,EAAOC,EAAcC,EAAW,IACzC,CAEA,SAASH,EAAeI,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC,CAEA,SAASL,EAAUM,EAAI,CAQrB,MAAMV,EAAO,KAAK,MAAMU,EAAK,KAAG,EAE1BT,EAAQ,KAAK,MAAOS,EAAK,MAAO,IAAI,EAEpCR,EAAU,KAAK,MAAQQ,EAAK,MAAO,KAAQ,GAAM,EAEjDP,EAAU,KAAK,MAASO,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAV,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,QAAQ,IAAIC,EAAU,GAAI,CAAC,EAC3B,QAAQ,IAAIA,EAAU,IAAM,CAAC,EAC7B,QAAQ,IAAIA,EAAU,MAAQ,CAAC"}